# Workflow for releases
name: releases

# Handle release events - this workflow needs to be present in the tag beign applied?


# Release types / actions:
  # - published - when a draft release is published.
  # - unpublished - Not sure how to trigger this from the github UI
  # - created - Not sure how to trigger this from teh github UI.
  # - edited - When release body/name is edited? 
  # - deleted - delete button.
  # - prereleased - when publshed && is marked as a pre-release
  # - released - when published && is not marked as a pre-release

# Force pushing a tag to a different commit does not re-trigger the release! - should have a on.push.tag which checks if tehre is an assocated release and if so does any extra objects?

on:
  release:
    types: 
      - published
      - unpublished
      - created
      - edited
      - deleted
      - prereleased
      - released


jobs:
  do_release:
    runs-on: ubuntu-18.04

    steps:
      - uses: actions/checkout@v2

      - name: Dump GitHub context
        env:
          GITHUB_CONTEXT: ${{ toJson(github) }}
        run: echo "$GITHUB_CONTEXT"

      - name: Configure
        run: cmake . -B build
        shell: bash

      # - name: build
      #   run: cmake --build . --target all 
      #   working-directory: build
