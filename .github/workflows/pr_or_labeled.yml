# Github action triggered by label, or by pr with label.

name: pr_or_labelled

# Build if a direct push to master, or a PR is approved.
on:
  # push:
    # branches: [ master ]
    # temp run on any push which changes the file.
    # paths: 
    #   - ".github/workflows/thorough.yml"
  # Trigger on pull requests, when opened, synced or reoponed (job 1), or labeled (job2).
  # Jobs should only run if labelled with FullCI ()
  pull_request:
    types: [opened, synchronize, reopened, labeled]
  
  pull_request_review:
    types: [submitted, edited, dismissed]


jobs:
  run_on_pr:
    runs-on: ubuntu-18.04
    steps:
    - uses: actions/checkout@v2
    - name: run-on-pr
      env:
        GITHUB_CONTEXT: ${{ toJson(github) }}
      run: echo ${{github.event.review.state }}


  run_if_labeled:
    if: contains(github.event.issue.labels.*.name, 'FullCI')
    runs-on:  ubuntu-18.04
    steps:
    - uses: actions/checkout@v2

    - name: Trigger_check
      run: |
        echo "This has been triggered?"
        echo "github.actor = ${{ github.actor }}"	

  run_if_approved:
    if: github.event.review.state == 'approved' 
    runs-on:  ubuntu-18.04
    steps:
    - uses: actions/checkout@v2
    - name: Trigger_check
      run: |
        echo "This has been triggered?"
        echo "github.event.review.state = ${{ github.event.review.state }}"	
  